# 📁 项目结构说明

## 当前目录结构（已清理）

```
gitblog/
├── 📄 README.md                          ← 项目主文档
├── 📄 快速开始.md                         ← 快速部署指南
├── 📄 Notion数据库字段配置详细指南.md      ← Notion配置详解
├── 📄 文档说明.md                         ← 文档导航
│
├── 📁 .github/
│   └── workflows/
│       └── sync-and-deploy.yml          ← 自动部署工作流
│
├── 📁 scripts/
│   └── sync-notion.js                   ← Notion同步脚本
│
├── 📁 data/
│   ├── blog/                            ← 博客文章目录
│   │   ├── build-notion-nextjs-blog.md
│   │   └── notion-blog-quick-guide.md
│   └── siteMetadata.js                  ← 博客配置（需修改）
│
├── 📁 app/                               ← Next.js应用页面
├── 📁 components/                        ← React组件
├── 📁 css/                               ← 样式文件
├── 📁 layouts/                           ← 页面布局
├── 📁 public/                            ← 静态资源
│   └── static/
│       └── images/
│           └── notion/                  ← Notion图片（自动下载）
│
├── 📄 .env.local                         ← 环境变量（需配置）
├── 📄 .env.example                       ← 环境变量示例
├── 📄 next.config.js                     ← Next.js配置
├── 📄 package.json                       ← 项目依赖
└── 📄 其他配置文件                        ← TypeScript、ESLint等
```

---

## ✅ 已清理的内容

已删除以下不必要的文件和目录：

| 目录/文件 | 说明 | 为什么删除 |
|----------|------|-----------|
| `.claude/` | Claude Code工作目录 | 开发工具临时文件，不需要 |
| `.devcontainer/` | VS Code容器配置 | 开发工具配置，非必需 |
| `.vscode/` | VS Code编辑器配置 | 编辑器配置，非必需 |
| `.yarn/` | Yarn包管理器 | 使用npm，不需要Yarn |
| `.yarnrc.yml` | Yarn配置文件 | 使用npm，不需要 |
| `yarn.lock` | Yarn依赖锁定 | 使用npm，不需要 |
| `faq/` | 模板FAQ目录 | 模板文档，不需要 |
| `.husky/` | Git hooks工具 | 可选的代码质量工具 |

---

## 📂 核心目录说明

### 用户需要关心的目录：

#### 1. **文档文件**（根目录）
```
README.md                              ← 从这里开始了解项目
快速开始.md                             ← 跟着这个一步步部署
Notion数据库字段配置详细指南.md          ← 配置Notion时查看
文档说明.md                             ← 文档导航
```

#### 2. **配置文件**
```
.env.local                             ← 配置Notion Token和Database ID
data/siteMetadata.js                   ← 配置博客名称、作者等信息
next.config.js                         ← Next.js配置（已配置好）
```

#### 3. **核心功能目录**
```
.github/workflows/                     ← GitHub Actions自动部署
scripts/sync-notion.js                 ← Notion同步脚本
data/blog/                             ← 博客文章存放位置
```

### 自动生成的目录（不要手动修改）：

#### 1. **.contentlayer/**
- Contentlayer缓存目录
- 运行 `npm run dev` 时自动生成
- 已在 `.gitignore` 中，不会提交到Git

#### 2. **node_modules/**
- npm依赖包目录
- 运行 `npm install` 时自动生成
- 已在 `.gitignore` 中，不会提交到Git

#### 3. **public/static/images/notion/**
- Notion图片自动下载位置
- 运行同步脚本时自动创建
- 会提交到Git，供博客使用

---

## 🔧 技术栈说明

按照你要求的技术栈：

### ✅ 内容管理：Notion
- **位置**：在线 Notion 数据库
- **作用**：写作和管理文章
- **免费**：个人版完全免费

### ✅ 博客框架：Next.js
- **目录**：`app/`, `components/`, `layouts/`
- **作用**：生成静态博客网站
- **特点**：快速、SEO友好

### ✅ 自动化部署：GitHub Actions
- **文件**：`.github/workflows/sync-and-deploy.yml`
- **作用**：自动同步Notion并部署
- **免费**：GitHub Actions 2000分钟/月

### ✅ 免费托管：GitHub Pages
- **部署目标**：`https://你的用户名.github.io/gitblog`
- **特点**：免费、HTTPS、CDN
- **备选**：Vercel（更快，也免费）

### 🔗 完整流程：

```
1. Notion写作
   ↓
2. GitHub Actions定时触发（每天凌晨2点）
   ↓
3. 运行 scripts/sync-notion.js
   ↓
4. 下载文章和图片到 data/blog/
   ↓
5. Next.js构建静态网站
   ↓
6. 部署到 GitHub Pages
   ↓
7. 完成！访问 https://你的用户名.github.io/gitblog
```

---

## 📝 文件详细说明

### 配置文件（必须配置）

| 文件 | 说明 | 何时修改 |
|------|------|---------|
| `.env.local` | 环境变量 | 部署前配置Token和Database ID |
| `data/siteMetadata.js` | 博客信息 | 部署前配置名称、作者、域名等 |

### 工作流文件（已配置好）

| 文件 | 说明 | 是否需要修改 |
|------|------|-------------|
| `.github/workflows/sync-and-deploy.yml` | 自动部署配置 | ❌ 不需要 |
| `scripts/sync-notion.js` | 同步脚本 | ❌ 不需要 |
| `next.config.js` | Next.js配置 | ❌ 不需要 |

### Next.js框架文件（不要修改）

| 目录/文件 | 说明 | 作用 |
|----------|------|------|
| `app/` | Next.js应用 | 页面路由和布局 |
| `components/` | React组件 | UI组件 |
| `layouts/` | 页面布局 | 博客布局模板 |
| `public/` | 静态资源 | 图片、字体等 |
| `css/` | 样式文件 | Tailwind CSS |
| `contentlayer.config.ts` | Contentlayer配置 | Markdown处理 |
| `tsconfig.json` | TypeScript配置 | 类型检查 |
| `package.json` | 项目配置 | 依赖和脚本 |

---

## 🎯 你需要做什么

### 必须配置（3个文件）：

1. **`.env.local`**
   ```bash
   NOTION_TOKEN=secret_你的Token
   NOTION_DATABASE_ID=你的DatabaseID
   ```

2. **`data/siteMetadata.js`**
   ```javascript
   title: '你的博客名称',
   author: '你的名字',
   siteUrl: 'https://你的域名',
   // ... 其他配置
   ```

3. **GitHub Secrets**
   - 在GitHub仓库添加Token和Database ID

### 不需要修改的：

- ❌ `app/`, `components/`, `layouts/`等Next.js目录
- ❌ `.github/workflows/sync-and-deploy.yml`
- ❌ `scripts/sync-notion.js`
- ❌ `next.config.js`
- ❌ 其他配置文件

---

## 🚀 快速开始

1. **配置Notion**（30分钟）
   - 参考 `Notion数据库字段配置详细指南.md`

2. **配置本地**（10分钟）
   - 编辑 `.env.local`
   - 编辑 `data/siteMetadata.js`
   - 测试：`node scripts/sync-notion.js`

3. **部署到GitHub**（20分钟）
   - 推送代码
   - 配置Secrets
   - 触发Actions

详细步骤请查看：`快速开始.md`

---

## 💡 常见疑问

### Q: 为什么有这么多配置文件？
**A**: Next.js是一个现代化的React框架，需要这些配置文件来支持TypeScript、ESLint、Tailwind CSS等功能。这些都已经配置好，不需要修改。

### Q: .contentlayer目录可以删除吗？
**A**: 可以删除，但下次运行 `npm run dev` 时会自动重新生成。这是Contentlayer的缓存目录。

### Q: node_modules很大，可以删除吗？
**A**: 可以删除，但下次需要运行 `npm install` 重新安装。这是npm的依赖包目录。

### Q: 我只想关心写作，其他都不想管怎么办？
**A**: 完全可以！配置完成后，你只需要：
1. 在Notion中写作
2. Status改为"Published"
3. 等待自动同步（每天凌晨2点）
4. 完成！

---

## 📊 目录大小参考

| 目录/文件 | 大小 | 说明 |
|----------|------|------|
| `node_modules/` | ~300MB | 依赖包（不提交） |
| `.contentlayer/` | ~5MB | 缓存（不提交） |
| 其他所有文件 | ~5MB | 实际项目文件 |

**Git仓库大小**：约5-10MB（不含node_modules和缓存）

---

**项目结构已优化完成！开始配置和部署吧！** ✨

_最后更新：2024-01-28_
